<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>南投環保局空氣品質淨化區資訊網</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">




  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">


</head>

<body class="starter-page-page">

  <header id="header" class="header d-flex align-items-center position-relative">
    <div class="container position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.webp" alt=""> -->
        <h1 class="sitename"><img src="assets/img/logo.png" alt="Blog Hero Image"></h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul id="nav-dynamic"></ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>


    </div>
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title">
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="index.html">首頁</a></li>
            <li class="current">基地查詢</li>
            <li class="current">基地介紹</li>
          </ol>
        </div>
      </nav>
    </div><!-- End Page Title -->

    <!-- Starter Section Section -->
    <section id="starter-section" class="starter-section section">

      <div class="container py-4">
        <div class="row justify-content-center">
          <div class="col-lg-9">
            <div id="custCarousel" class="carousel slide" data-bs-ride="carousel">
              <!-- 幻燈片 -->
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img src="https://i.imgur.com/weXVL8M.jpg" alt="Green hills in morning light">
                </div>
                <div class="carousel-item">
                  <img src="https://i.imgur.com/Rpxx6wU.jpg" alt="Rolling hills and valley">
                </div>
                <div class="carousel-item">
                  <img src="https://i.imgur.com/83fandJ.jpg" alt="Hills with winding road">
                </div>
              </div>
    
              <!-- 上一張 / 下一張 -->
              <button class="carousel-control-prev" type="button" data-bs-target="#custCarousel" data-bs-slide="prev" aria-label="Previous slide">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#custCarousel" data-bs-slide="next" aria-label="Next slide">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
              </button>
    
              <!-- 縮圖指示器（用 button + img） -->
              <div class="carousel-indicators justify-content-center flex-wrap">
                <button type="button" data-bs-target="#custCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1">
                  <img src="https://i.imgur.com/weXVL8M.jpg" alt="Slide 1 thumbnail">
                </button>
                <button type="button" data-bs-target="#custCarousel" data-bs-slide-to="1" aria-label="Slide 2">
                  <img src="https://i.imgur.com/Rpxx6wU.jpg" alt="Slide 2 thumbnail">
                </button>
                <button type="button" data-bs-target="#custCarousel" data-bs-slide-to="2" aria-label="Slide 3">
                  <img src="https://i.imgur.com/83fandJ.jpg" alt="Slide 3 thumbnail">
                </button>
    
              </div>
            </div>
          </div>
        </div>
      </div>




      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div class="table-responsive">
              <table class="table table-bordered mb-0 aqp-table" aria-label="空氣品質淨化區資料表">
                <colgroup>
                  <col style="width:28%">
                  <col style="width:72%">
                </colgroup>
                <tbody>
                  <tr>
                    <th scope="row" class="aqp-th">序號</th>
                    <td class="aqp-td">EPB-4-448</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">設置年度</th>
                    <td class="aqp-td">113年</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">設置經費來源</th>
                    <td class="aqp-td">來源資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">鄉鎮別</th>
                    <td class="aqp-td">行政區資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">基地名稱</th>
                    <td class="aqp-td">基地名稱資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">類別</th>
                    <td class="aqp-td">類別資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">基地面積(平方公尺)</th>
                    <td class="aqp-td">面積資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">基地長度(公尺)</th>
                    <td class="aqp-td">長度資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">GPS座標</th>
                    <td class="aqp-td">座標資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">維護單位</th>
                    <td class="aqp-td">維護單位資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">認養單位</th>
                    <td class="aqp-td">認養單位資料</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">認養日期</th>
                    <td class="aqp-td">114/01/01~114/12/31</td>
                  </tr>
                  <tr>
                    <th scope="row" class="aqp-th">說明</th>
                    <td class="aqp-td">
                      留一個比較大的欄位，讓我可以做介紹說明留一個比較大的欄位，讓我可以做介紹說明留一個比較大的欄位，讓我可以做介紹說明留一個比較大的欄位，讓我可以做介紹說明留一個比較大的欄位，讓我可以做介紹說明
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
    
            <!-- 備註：若要大量套用，可把 <tr> 用樣板引擎或 JS 產生 -->
          </div>
        </div>
      </div>

      <!-- Section Title -->
     
      


      <div class="text-center mt-5">
        <a href="basequery.html" class="backpage-button" data-aos="fade-up" data-aos-delay="300">返回基地查詢列表</a>
      </div>

     

    </section><!-- /Starter Section Section -->


  </main>

  <footer id="footer" class="footer position-relative light-background">

    <div class="container">
      <div class="row gy-5">

        <div class="col-lg-4">
          <div class="footer-brand">
            <a href="index.html" class="logo d-flex align-items-center mb-3">
              <h4>南投縣政府環境保護局</h4>
            </a>
            <p class="tagline">上班(服務)時間：<br>上午 08:00-12:00；下午 13:30-17:30 <br>(週六、日及例假日休息)</p>

            <div class="social-links mt-4">
              <a href="#" aria-label="Facebook"><i class="bi bi-facebook"></i></a>
              <a href="#" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="footer-links-grid">
            <div class="row">
              <div class="col-6 col-md-4">
                <h5>首頁區塊</h5>
                <ul class="list-unstyled">
                  <li><a href="index.html#latest-posts">最新花絮</a></li>
                  <li><a href="index.html#greensituation">綠地現況</a></li>
                  <li><a href="index.html#numberbases">基地數量</a></li>
                </ul>
              </div>
              <div class="col-6 col-md-4">
                <h5>基地介紹</h5>
                <ul class="list-unstyled">
                  <li><a href="basequery.html">空氣品質淨化區</a></li>
                  <li><a href="basequery.html">清淨綠牆</a></li>
                  <li><a href="basequery.html">綠美化</a></li>
                </ul>
              </div>
              <div class="col-6 col-md-4">
                <h5>其他頁面</h5>
                <ul class="list-unstyled">
                  <li><a href="species.html">樹種介紹</a></li>
                  <li><a href="download.html">文件下載</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-2">
          <div class="footer-cta">
            <h5>聯絡我們</h5>
            <p>TEL：(049)223-7530</p>
          </div>
        </div>

      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div class="footer-bottom-content">
              <p class="mb-0">© <strong>南投縣政府環境保護局版權所有</strong>. All rights reserved.</p>
              <div class="credits">
                Designed by 艾可森數位學習有限公司</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>






  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>
  <script>
    (() => {
      // If your API is on another domain, set it here (e.g., "https://api.example.com")
      const API_BASE = ""; // same-origin by default
    
      // 1) Read URL params
      const qp = new URLSearchParams(location.search);
      const rawType = (qp.get("type") || "").trim();
      const id = Number(qp.get("id"));
    
      // 2) Map human types to REST resources
      const TYPE_MAP = {
        "空氣品質淨化": "purification_zones",
        "空氣品質淨化區": "purification_zones",
        "air": "purification_zones",
        "purification": "purification_zones",
        "綠美化": "greenifications",
        "清淨綠牆": "green_walls"
      };
    
      const resource = TYPE_MAP[rawType] || "purification_zones";
      const primary = `${API_BASE}/api/${resource}/${id}`;
      const fallback = `${API_BASE}/api/${resource}`;
    
      // 3) Helpers
      const $ = (sel) => document.querySelector(sel);
    
      function cellFor(label) {
        const rows = document.querySelectorAll(".aqp-table tr");
        for (const tr of rows) {
          const th = tr.querySelector("th");
          const td = tr.querySelector("td");
          if (th && td && th.textContent.trim() === label) return td;
        }
        return null;
      }
    
      const setCell = (label, value) => {
        const td = cellFor(label);
        if (td) td.textContent = (value ?? "").toString();
      };
    
      function fmtDate(d) {
        if (!d) return "";
        const dt = new Date(d);
        if (isNaN(dt)) return String(d);
        const y = dt.getFullYear();
        const m = String(dt.getMonth()+1).padStart(2,"0");
        const dd= String(dt.getDate()).padStart(2,"0");
        return `${y}/${m}/${dd}`;
      }
    
      function normalizeImages(v) {
        if (!v) return [];
        if (Array.isArray(v)) return v.filter(Boolean);
        if (typeof v === "string") {
          try {
            const j = JSON.parse(v);
            if (Array.isArray(j)) return j.filter(Boolean);
          } catch (_) {}
          return v.split(/[\s,|]+/).map(s => s.trim()).filter(Boolean);
        }
        return [];
      }
    
      function renderCarousel(images) {
        const inner = document.querySelector("#custCarousel .carousel-inner");
        const ind   = document.querySelector("#custCarousel .carousel-indicators");
        if (!inner || !ind) return;
    
        inner.innerHTML = "";
        ind.innerHTML = "";
    
        const list = images.length ? images : ["https://placehold.co/1200x600?text=No+Image"];
    
        list.forEach((src, i) => {
          const item = document.createElement("div");
          item.className = "carousel-item" + (i === 0 ? " active" : "");
          item.innerHTML = `<img src="${src}" class="d-block w-100" alt="slide ${i+1}">`;
          inner.appendChild(item);
    
          const btn = document.createElement("button");
          btn.type = "button";
          btn.setAttribute("data-bs-target", "#custCarousel");
          btn.setAttribute("data-bs-slide-to", String(i));
          if (i === 0) { btn.className = "active"; btn.setAttribute("aria-current", "true"); }
          btn.setAttribute("aria-label", `Slide ${i+1}`);
          btn.innerHTML = `<img src="${src}" alt="thumb ${i+1}" style="height:36px">`;
          ind.appendChild(btn);
        });
      }
    
      function showAlert(msg, variant="info") {
        let box = document.getElementById("project-alert");
        if (!box) {
          box = document.createElement("div");
          box.id = "project-alert";
          box.className = `alert alert-${variant} mt-3`;
          const host = document.querySelector("#starter-section .container") || document.body;
          host.appendChild(box);
        }
        box.className = `alert alert-${variant} mt-3`;
        box.textContent = msg;
      }
    
      // 4) Bootstrap: validate params
      if (!id) {
        showAlert("缺少 URL 參數：?id=（例如 ?id=1）", "danger");
        return;
      }
    
      // 5) Load + render
      (async function load() {
        showAlert("載入中…", "info");
    
        let data;
        try {
          const r = await fetch(primary, { credentials: "same-origin" });
          if (!r.ok) throw new Error(`HTTP ${r.status}`);
          data = await r.json();
        } catch (e) {
          try {
            const r2 = await fetch(fallback, { credentials: "same-origin" });
            const arr = await r2.json();
            data = (arr || []).find(x => Number(x?.id) === id);
          } catch (e2) {
            // ignore; handled below
          }
        }
    
        if (!data) {
          showAlert("找不到對應資料（請檢查 type 與 id 是否正確）", "danger");
          return;
        }
    
        // --- Field mapping (adjust to your actual keys if different) ---
        // Expected keys: serial, year, subsidy_source, district, project_name, type,
        // area, length, gps, maintain_unit, adopt_unit, maintain_start_date, maintain_end_date,
        // annotation, image_urls
        renderCarousel(normalizeImages(data.image_urls));
    
        setCell("序號", data.serial);
        setCell("設置年度", data.year);
        setCell("設置經費來源", data.subsidy_source);
        setCell("鄉鎮別", data.district);
        setCell("基地名稱", data.project_name);
        setCell("類別", data.type);
        setCell("基地面積(平方公尺)", data.area);
        setCell("基地長度(公尺)", data.length);
        setCell("GPS座標", data.gps);
        setCell("維護單位", data.maintain_unit);
        setCell("認養單位", data.adopt_unit);
    
        const range = [fmtDate(data.maintain_start_date), fmtDate(data.maintain_end_date)]
          .filter(Boolean).join(" ~ ");
        setCell("認養日期", range);
    
        const descCell = cellFor("說明");
        if (descCell) descCell.textContent = data.annotation || "";
    
        // Breadcrumb last item becomes project name
        const crumbs = document.querySelectorAll(".breadcrumbs .current");
        if (crumbs.length && data.project_name) {
          crumbs[crumbs.length - 1].textContent = data.project_name;
        }
    
        showAlert("載入完成", "success");
        setTimeout(() => { const a = $("#project-alert"); a && a.remove(); }, 1500);
      })();
    })();
    </script>

<script>
  (async () => {
const API_BASE = ""; // same origin (if Flask runs at same port)
const ul = document.getElementById("nav-dynamic");
if (!ul) return;

// 1️⃣ Fetch visible sections
let sections = [];
try {
const res = await fetch(`${API_BASE}/api/site/sections`, { credentials: "same-origin" });
if (res.ok) sections = await res.json();
} catch (err) {
console.error("Failed to load site sections:", err);
}

// 2️⃣ Build dropdown only for visible ones
const visible = sections.filter(s => s.is_visible);
if (visible.length > 0) {
const li = document.createElement("li");
li.className = "dropdown";

const dropdownToggle = `
  <a href="#"><span>基地介紹</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
`;
const subUl = document.createElement("ul");

visible.forEach(sec => {
  const label = sec.label;
  const a = document.createElement("a");
  a.href = `basequery.html?type=${encodeURIComponent(label)}`;
  a.textContent = label;
  const liSub = document.createElement("li");
  liSub.appendChild(a);
  subUl.appendChild(liSub);
});

li.innerHTML = dropdownToggle;
li.appendChild(subUl);
ul.appendChild(li);
}

// 3️⃣ Append the static parts (always present)
const staticLinks = [
{ label: "最新成果", href: "articles.html" },
{ label: "樹種介紹", href: "species.html" },
{ label: "文件下載", href: "download.html" },
];

staticLinks.forEach(item => {
const li = document.createElement("li");
li.innerHTML = `<a href="${item.href}">${item.label}</a>`;
ul.appendChild(li);
});
})();
</script>

<script>
  (async () => {
const API_BASE = ""; // same origin (if Flask runs at same port)
const ul = document.getElementById("nav-dynamic");
if (!ul) return;

// 1️⃣ Fetch visible sections
let sections = [];
try {
const res = await fetch(`${API_BASE}/api/site/sections`, { credentials: "same-origin" });
if (res.ok) sections = await res.json();
} catch (err) {
console.error("Failed to load site sections:", err);
}

// 2️⃣ Build dropdown only for visible ones
const visible = sections.filter(s => s.is_visible);
if (visible.length > 0) {
const li = document.createElement("li");
li.className = "dropdown";

const dropdownToggle = `
  <a href="#"><span>基地介紹</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
`;
const subUl = document.createElement("ul");

visible.forEach(sec => {
  const label = sec.label;
  const a = document.createElement("a");
  a.href = `basequery.html?type=${encodeURIComponent(label)}`;
  a.textContent = label;
  const liSub = document.createElement("li");
  liSub.appendChild(a);
  subUl.appendChild(liSub);
});

li.innerHTML = dropdownToggle;
li.appendChild(subUl);
ul.appendChild(li);
}

// 3️⃣ Append the static parts (always present)
const staticLinks = [
{ label: "最新成果", href: "articles.html" },
{ label: "樹種介紹", href: "species.html" },
{ label: "文件下載", href: "download.html" },
];

staticLinks.forEach(item => {
const li = document.createElement("li");
li.innerHTML = `<a href="${item.href}">${item.label}</a>`;
ul.appendChild(li);
});
})();
</script>
    

</body>

</html>